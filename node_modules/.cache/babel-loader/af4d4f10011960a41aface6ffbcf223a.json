{"ast":null,"code":"import _slicedToArray from\"/Users/maksim/Desktop/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect}from\"react\";import{CurrentUserContext}from\"../../contexts/CurrentUserContext\";import useInputHandling from\"../../custom_hooks/useInputHandling\";import PopupWithForm from\"./PopupWithForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function EditProfilePopup(_ref){var _inputs$name$isValid,_inputs$name,_inputs$name2,_inputs$name3,_inputs$about$isValid,_inputs$about,_inputs$about2,_inputs$about3;var isOpen=_ref.isOpen,isLoading=_ref.isLoading,onClose=_ref.onClose,onSubmit=_ref.onSubmit;var currentUser=useContext(CurrentUserContext);var hookConfig={defaultInputs:{name:{value:currentUser.name},about:{value:currentUser.about}},defaultInputIsValidState:true};var _useInputHandling=useInputHandling(hookConfig,isOpen),_useInputHandling2=_slicedToArray(_useInputHandling,4),inputs=_useInputHandling2[0],isValid=_useInputHandling2[1],handleInputsUpdate=_useInputHandling2[2],handleChange=_useInputHandling2[3];// useEffect(() => {\n//   console.log('popup', isValid)\n// }, [isValid])\nuseEffect(function(){var delay=isOpen?0:200;setTimeout(function(){return handleInputsUpdate();},delay);},[isOpen]);return/*#__PURE__*/_jsx(PopupWithForm,{onClose:onClose,onSubmit:onSubmit,isOpen:isOpen,isLoading:isLoading,isValid:isValid,inputs:inputs,name:\"profile-edit\",title:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\",submitText:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\",loadingSubmitText:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0435\\u043D\\u0438\\u0435\",inputFieldset:/*#__PURE__*/_jsxs(\"fieldset\",{className:\"form__input-container form__input-container_type_popup\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form__field\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form__input form__input_type_popup \".concat(!((_inputs$name$isValid=(_inputs$name=inputs.name)===null||_inputs$name===void 0?void 0:_inputs$name.isValid)!==null&&_inputs$name$isValid!==void 0?_inputs$name$isValid:true)?'form__input_invalid':''),name:\"name\",id:\"name-input\",type:\"text\",placeholder:\"\\u0418\\u043C\\u044F\",required:true,minLength:\"2\",maxLength:\"40\",onChange:handleChange,value:(_inputs$name2=inputs.name)===null||_inputs$name2===void 0?void 0:_inputs$name2.value}),/*#__PURE__*/_jsxs(\"span\",{className:\"form__input-error\",children:[\" \",(_inputs$name3=inputs.name)===null||_inputs$name3===void 0?void 0:_inputs$name3.errorMessage,\" \"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form__field\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form__input form__input_type_popup \".concat(!((_inputs$about$isValid=(_inputs$about=inputs.about)===null||_inputs$about===void 0?void 0:_inputs$about.isValid)!==null&&_inputs$about$isValid!==void 0?_inputs$about$isValid:true)?'form__input_invalid':''),name:\"about\",id:\"about-input\",type:\"text\",placeholder:\"\\u041E \\u0441\\u0435\\u0431\\u0435\",required:true,minLength:\"2\",maxLength:\"200\",onChange:handleChange,value:(_inputs$about2=inputs.about)===null||_inputs$about2===void 0?void 0:_inputs$about2.value}),/*#__PURE__*/_jsxs(\"span\",{className:\"form__input-error\",children:[\" \",(_inputs$about3=inputs.about)===null||_inputs$about3===void 0?void 0:_inputs$about3.errorMessage,\" \"]})]})]})});}","map":{"version":3,"names":["React","useContext","useEffect","CurrentUserContext","useInputHandling","PopupWithForm","EditProfilePopup","isOpen","isLoading","onClose","onSubmit","currentUser","hookConfig","defaultInputs","name","value","about","defaultInputIsValidState","inputs","isValid","handleInputsUpdate","handleChange","delay","setTimeout","errorMessage"],"sources":["/Users/maksim/Desktop/dev/mesto-react/src/components/Popups/EditProfilePopup.js"],"sourcesContent":["import React, { useContext, useEffect } from \"react\";\nimport { CurrentUserContext } from \"../../contexts/CurrentUserContext\";\nimport useInputHandling from \"../../custom_hooks/useInputHandling\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nexport default function EditProfilePopup({ isOpen, isLoading, onClose, onSubmit }) {\n  const currentUser = useContext(CurrentUserContext);\n  const hookConfig = {\n    defaultInputs: { name: { value: currentUser.name }, about: { value: currentUser.about } },\n    defaultInputIsValidState: true\n  }\n  const [ inputs, isValid, handleInputsUpdate, handleChange ] = useInputHandling(hookConfig, isOpen);\n\n  // useEffect(() => {\n  //   console.log('popup', isValid)\n  // }, [isValid])\n\n  useEffect(() => {\n    const delay = isOpen ? 0 : 200; \n\n    setTimeout(() => handleInputsUpdate(), delay);\n  }, [isOpen]);\n\n  return(\n    <PopupWithForm\n      onClose={onClose}\n      onSubmit={onSubmit}\n      isOpen={isOpen}\n      isLoading={isLoading}\n      isValid={isValid}\n      inputs={inputs}\n      name=\"profile-edit\" \n      title=\"Редактировать профиль\" \n      submitText=\"Сохранить\"\n      loadingSubmitText=\"Сохранение\"\n      inputFieldset={\n        <fieldset className={`form__input-container form__input-container_type_popup`}>\n          <div className=\"form__field\">\n            <input\n              className={`form__input form__input_type_popup ${!(inputs.name?.isValid ?? true) ? 'form__input_invalid' : ''}`} \n              name=\"name\" \n              id=\"name-input\" \n              type=\"text\" \n              placeholder=\"Имя\" \n              required \n              minLength=\"2\" \n              maxLength=\"40\" \n              onChange={handleChange} \n              value={inputs.name?.value} \n            />\n            <span className=\"form__input-error\"> { inputs.name?.errorMessage } </span>\n          </div>\n          <div className=\"form__field\">\n            <input \n              className={`form__input form__input_type_popup ${!(inputs.about?.isValid ?? true) ? 'form__input_invalid' : ''}`} \n              name=\"about\" \n              id=\"about-input\" \n              type=\"text\" \n              placeholder=\"О себе\" \n              required \n              minLength=\"2\" \n              maxLength=\"200\" \n              onChange={handleChange} \n              value={inputs.about?.value} \n            />\n            <span className=\"form__input-error\"> { inputs.about?.errorMessage } </span>\n          </div>\n        </fieldset>\n      } \n    />\n  )\n}\n\n"],"mappings":"2HAAA,MAAOA,MAAP,EAAgBC,UAAhB,CAA4BC,SAA5B,KAA6C,OAA7C,CACA,OAASC,kBAAT,KAAmC,mCAAnC,CACA,MAAOC,iBAAP,KAA6B,qCAA7B,CACA,MAAOC,cAAP,KAA0B,iBAA1B,C,wFAEA,cAAe,SAASC,iBAAT,MAAoE,wIAAxCC,OAAwC,MAAxCA,MAAwC,CAAhCC,SAAgC,MAAhCA,SAAgC,CAArBC,OAAqB,MAArBA,OAAqB,CAAZC,QAAY,MAAZA,QAAY,CACjF,GAAMC,YAAW,CAAGV,UAAU,CAACE,kBAAD,CAA9B,CACA,GAAMS,WAAU,CAAG,CACjBC,aAAa,CAAE,CAAEC,IAAI,CAAE,CAAEC,KAAK,CAAEJ,WAAW,CAACG,IAArB,CAAR,CAAqCE,KAAK,CAAE,CAAED,KAAK,CAAEJ,WAAW,CAACK,KAArB,CAA5C,CADE,CAEjBC,wBAAwB,CAAE,IAFT,CAAnB,CAIA,sBAA8Db,gBAAgB,CAACQ,UAAD,CAAaL,MAAb,CAA9E,wDAAQW,MAAR,uBAAgBC,OAAhB,uBAAyBC,kBAAzB,uBAA6CC,YAA7C,uBAEA;AACA;AACA;AAEAnB,SAAS,CAAC,UAAM,CACd,GAAMoB,MAAK,CAAGf,MAAM,CAAG,CAAH,CAAO,GAA3B,CAEAgB,UAAU,CAAC,iBAAMH,mBAAkB,EAAxB,EAAD,CAA6BE,KAA7B,CAAV,CACD,CAJQ,CAIN,CAACf,MAAD,CAJM,CAAT,CAMA,mBACE,KAAC,aAAD,EACE,OAAO,CAAEE,OADX,CAEE,QAAQ,CAAEC,QAFZ,CAGE,MAAM,CAAEH,MAHV,CAIE,SAAS,CAAEC,SAJb,CAKE,OAAO,CAAEW,OALX,CAME,MAAM,CAAED,MANV,CAOE,IAAI,CAAC,cAPP,CAQE,KAAK,CAAC,2HARR,CASE,UAAU,CAAC,wDATb,CAUE,iBAAiB,CAAC,8DAVpB,CAWE,aAAa,cACX,kBAAU,SAAS,yDAAnB,wBACE,aAAK,SAAS,CAAC,aAAf,wBACE,cACE,SAAS,8CAAwC,sCAAEA,MAAM,CAACJ,IAAT,uCAAE,aAAaK,OAAf,6DAA0B,IAA1B,EAAkC,qBAAlC,CAA0D,EAAlG,CADX,CAEE,IAAI,CAAC,MAFP,CAGE,EAAE,CAAC,YAHL,CAIE,IAAI,CAAC,MAJP,CAKE,WAAW,CAAC,oBALd,CAME,QAAQ,KANV,CAOE,SAAS,CAAC,GAPZ,CAQE,SAAS,CAAC,IARZ,CASE,QAAQ,CAAEE,YATZ,CAUE,KAAK,gBAAEH,MAAM,CAACJ,IAAT,wCAAE,cAAaC,KAVtB,EADF,cAaE,cAAM,SAAS,CAAC,mBAAhB,8BAAuCG,MAAM,CAACJ,IAA9C,wCAAuC,cAAaU,YAApD,OAbF,GADF,cAgBE,aAAK,SAAS,CAAC,aAAf,wBACE,cACE,SAAS,8CAAwC,wCAAEN,MAAM,CAACF,KAAT,wCAAE,cAAcG,OAAhB,+DAA2B,IAA3B,EAAmC,qBAAnC,CAA2D,EAAnG,CADX,CAEE,IAAI,CAAC,OAFP,CAGE,EAAE,CAAC,aAHL,CAIE,IAAI,CAAC,MAJP,CAKE,WAAW,CAAC,iCALd,CAME,QAAQ,KANV,CAOE,SAAS,CAAC,GAPZ,CAQE,SAAS,CAAC,KARZ,CASE,QAAQ,CAAEE,YATZ,CAUE,KAAK,iBAAEH,MAAM,CAACF,KAAT,yCAAE,eAAcD,KAVvB,EADF,cAaE,cAAM,SAAS,CAAC,mBAAhB,+BAAuCG,MAAM,CAACF,KAA9C,yCAAuC,eAAcQ,YAArD,OAbF,GAhBF,GAZJ,EADF,CAgDD"},"metadata":{},"sourceType":"module"}