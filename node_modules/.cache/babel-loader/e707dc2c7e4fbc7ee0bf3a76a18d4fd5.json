{"ast":null,"code":"import _slicedToArray from\"/Users/maksim/Desktop/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Form from\"../Form\";import Header from\"../Header\";import useInputHandling from\"../../custom_hooks/useInputHandling\";import{Link,useHistory}from\"react-router-dom\";import auth from\"../../utils/Auth\";import{useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Login(_ref){var _inputs$email$isValid,_inputs$email,_inputs$email2,_inputs$email3,_inputs$password$isVa,_inputs$password,_inputs$password2,_inputs$password3;var onSignIn=_ref.onSignIn;var history=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var hookConfig={defaultInputs:{email:{value:''},password:{value:''}},defaultInputIsValidState:false};var _useInputHandling=useInputHandling(hookConfig),_useInputHandling2=_slicedToArray(_useInputHandling,4),inputs=_useInputHandling2[0],isValid=_useInputHandling2[1],handleInputsUpdate=_useInputHandling2[2],handleChange=_useInputHandling2[3];function handleSubmit(evt){evt.preventDefault();setIsLoading(true);auth.login(inputs.email.value,inputs.password.value).then(function(data){onSignIn(data.token);history.push('/');}).catch(function(err){return console.log(err);}).finally(function(){return setIsLoading(false);});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{redirectLink:/*#__PURE__*/_jsx(Link,{className:\"header__link header__link_type_auth\",to:\"sign-up\",children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"})}),/*#__PURE__*/_jsx(Form,{type:\"auth\",onSubmit:handleSubmit,isLoading:isLoading,isValid:isValid,inputs:inputs,name:\"login\",title:\"\\u0412\\u0445\\u043E\\u0434\",submitText:\"\\u0412\\u043E\\u0439\\u0442\\u0438\",loadingSubmitText:\"\\u0412\\u0445\\u043E\\u0434\",inputFieldset:/*#__PURE__*/_jsxs(\"fieldset\",{className:\"form__input-container form__input-container_type_auth\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form__field\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form__input form__input_type_auth \".concat(!((_inputs$email$isValid=(_inputs$email=inputs.email)===null||_inputs$email===void 0?void 0:_inputs$email.isValid)!==null&&_inputs$email$isValid!==void 0?_inputs$email$isValid:true)?'form__input_invalid':''),name:\"email\",id:\"email-input\",type:\"email\",placeholder:\"Email\",required:true,onChange:handleChange,value:(_inputs$email2=inputs.email)===null||_inputs$email2===void 0?void 0:_inputs$email2.value}),/*#__PURE__*/_jsxs(\"span\",{className:\"form__input-error\",children:[\" \",(_inputs$email3=inputs.email)===null||_inputs$email3===void 0?void 0:_inputs$email3.errorMessage,\" \"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form__field\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form__input form__input_type_auth \".concat(!((_inputs$password$isVa=(_inputs$password=inputs.password)===null||_inputs$password===void 0?void 0:_inputs$password.isValid)!==null&&_inputs$password$isVa!==void 0?_inputs$password$isVa:true)?'form__input_invalid':''),name:\"password\",id:\"password-input\",type:\"password\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",required:true,minLength:\"2\",maxLength:\"30\",onChange:handleChange,value:(_inputs$password2=inputs.password)===null||_inputs$password2===void 0?void 0:_inputs$password2.value}),/*#__PURE__*/_jsxs(\"span\",{className:\"form__input-error\",children:[\" \",(_inputs$password3=inputs.password)===null||_inputs$password3===void 0?void 0:_inputs$password3.errorMessage,\" \"]})]})]})})]});}","map":{"version":3,"names":["Form","Header","useInputHandling","Link","useHistory","auth","useState","Login","onSignIn","history","isLoading","setIsLoading","hookConfig","defaultInputs","email","value","password","defaultInputIsValidState","inputs","isValid","handleInputsUpdate","handleChange","handleSubmit","evt","preventDefault","login","then","data","token","push","catch","err","console","log","finally","errorMessage"],"sources":["/Users/maksim/Desktop/dev/mesto-react/src/components/AuthForms/Login.js"],"sourcesContent":["import Form from \"../Form\";\r\nimport Header from \"../Header\";\r\nimport useInputHandling from \"../../custom_hooks/useInputHandling\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport auth from \"../../utils/Auth\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function Login({ onSignIn }) {\r\n  const history = useHistory();\r\n  const [ isLoading, setIsLoading ] = useState(false);\r\n  const hookConfig = {\r\n    defaultInputs: { email: { value: '' }, password: { value: '' } },\r\n    defaultInputIsValidState: false\r\n  }\r\n  const [ inputs, isValid, handleInputsUpdate, handleChange ] = useInputHandling(hookConfig);\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    \r\n    setIsLoading(true);\r\n    auth.login(inputs.email.value, inputs.password.value)\r\n      .then((data) => { \r\n        onSignIn(data.token);\r\n        history.push('/');\r\n      })\r\n      .catch((err) => console.log(err))\r\n      .finally(() => setIsLoading(false));\r\n  }\r\n  return(\r\n    <>\r\n      <Header \r\n        redirectLink={\r\n          <Link className=\"header__link header__link_type_auth\" to=\"sign-up\">Регистрация</Link>\r\n        }\r\n      />\r\n      <Form\r\n        type='auth'\r\n        onSubmit={handleSubmit}\r\n        isLoading={isLoading}\r\n        isValid={isValid}\r\n        inputs={inputs}\r\n        name=\"login\" \r\n        title=\"Вход\" \r\n        submitText=\"Войти\"\r\n        loadingSubmitText=\"Вход\"\r\n        inputFieldset={\r\n          <fieldset className=\"form__input-container form__input-container_type_auth\">\r\n            <div className=\"form__field\">\r\n              <input\r\n                className={`form__input form__input_type_auth ${!(inputs.email?.isValid ?? true) ? 'form__input_invalid' : ''}`} \r\n                name=\"email\" \r\n                id=\"email-input\" \r\n                type=\"email\" \r\n                placeholder=\"Email\" \r\n                required \r\n                onChange={handleChange} \r\n                value={inputs.email?.value} \r\n              />\r\n              <span className=\"form__input-error\"> { inputs.email?.errorMessage } </span>\r\n            </div>\r\n            <div className=\"form__field\">\r\n              <input \r\n                className={`form__input form__input_type_auth ${!(inputs.password?.isValid ?? true) ? 'form__input_invalid' : ''}`} \r\n                name=\"password\" \r\n                id=\"password-input\" \r\n                type=\"password\" \r\n                placeholder=\"Пароль\" \r\n                required\r\n                minLength=\"2\" \r\n                maxLength=\"30\" \r\n                onChange={handleChange} \r\n                value={inputs.password?.value} \r\n              />\r\n              <span className=\"form__input-error\"> { inputs.password?.errorMessage } </span>\r\n            </div>\r\n          </fieldset>\r\n        } \r\n      />\r\n    </>\r\n  )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}