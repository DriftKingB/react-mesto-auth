{"ast":null,"code":"var _jsxFileName = \"/Users/maksim/Desktop/dev/mesto-react/src/components/AuthForms/Login.js\",\n    _s = $RefreshSig$();\n\nimport Form from \"../Form\";\nimport Header from \"../Header\";\nimport useInputHandling from \"../../custom_hooks/useInputHandling\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport auth from \"../../utils/Auth\";\nimport { useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n\n  var _inputs$email$isValid, _inputs$email, _inputs$email2, _inputs$email3, _inputs$password$isVa, _inputs$password, _inputs$password2, _inputs$password3;\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const hookConfig = {\n    defaultInputs: {\n      email: {\n        value: ''\n      },\n      password: {\n        value: ''\n      }\n    },\n    defaultInputIsValidState: false\n  };\n  const [inputs, isValid, handleInputsUpdate, handleChange] = useInputHandling(hookConfig);\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    setIsLoading(true);\n    auth.login(inputs.email.value, inputs.password.value).then(data => {\n      setIsLoggedIn(true);\n      localStorage.setItem('token', data.token);\n    }).catch(err => {\n      console.log(err);\n    }).finally(() => {\n      setIsLoading(false);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [isLoggedIn && /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(Header, {\n      redirectLink: /*#__PURE__*/_jsxDEV(Link, {\n        className: \"header__link header__link_type_auth\",\n        to: \"sign-up\",\n        children: \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      type: \"auth\",\n      onSubmit: handleSubmit,\n      isLoading: isLoading,\n      isValid: isValid,\n      inputs: inputs,\n      name: \"login\",\n      title: \"\\u0412\\u0445\\u043E\\u0434\",\n      submitText: \"\\u0412\\u043E\\u0439\\u0442\\u0438\",\n      loadingSubmitText: \"\\u0412\\u0445\\u043E\\u0434\",\n      inputFieldset: /*#__PURE__*/_jsxDEV(\"fieldset\", {\n        className: \"form__input-container form__input-container_type_auth\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form__field\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: `form__input form__input_type_auth ${!((_inputs$email$isValid = (_inputs$email = inputs.email) === null || _inputs$email === void 0 ? void 0 : _inputs$email.isValid) !== null && _inputs$email$isValid !== void 0 ? _inputs$email$isValid : true) ? 'form__input_invalid' : ''}`,\n            name: \"email\",\n            id: \"email-input\",\n            type: \"email\",\n            placeholder: \"Email\",\n            required: true,\n            onChange: handleChange,\n            value: (_inputs$email2 = inputs.email) === null || _inputs$email2 === void 0 ? void 0 : _inputs$email2.value\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"form__input-error\",\n            children: [\" \", (_inputs$email3 = inputs.email) === null || _inputs$email3 === void 0 ? void 0 : _inputs$email3.errorMessage, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form__field\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: `form__input form__input_type_auth ${!((_inputs$password$isVa = (_inputs$password = inputs.password) === null || _inputs$password === void 0 ? void 0 : _inputs$password.isValid) !== null && _inputs$password$isVa !== void 0 ? _inputs$password$isVa : true) ? 'form__input_invalid' : ''}`,\n            name: \"password\",\n            id: \"password-input\",\n            type: \"password\",\n            placeholder: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n            required: true,\n            minLength: \"2\",\n            maxLength: \"30\",\n            onChange: handleChange,\n            value: (_inputs$password2 = inputs.password) === null || _inputs$password2 === void 0 ? void 0 : _inputs$password2.value\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"form__input-error\",\n            children: [\" \", (_inputs$password3 = inputs.password) === null || _inputs$password3 === void 0 ? void 0 : _inputs$password3.errorMessage, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Login, \"741X24KoDCKipZmxDveSO7OPpTs=\", false, function () {\n  return [useInputHandling];\n});\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["Form","Header","useInputHandling","Link","Redirect","auth","useState","Login","isLoading","setIsLoading","isLoggedIn","setIsLoggedIn","hookConfig","defaultInputs","email","value","password","defaultInputIsValidState","inputs","isValid","handleInputsUpdate","handleChange","handleSubmit","evt","preventDefault","login","then","data","localStorage","setItem","token","catch","err","console","log","finally","errorMessage"],"sources":["/Users/maksim/Desktop/dev/mesto-react/src/components/AuthForms/Login.js"],"sourcesContent":["import Form from \"../Form\";\r\nimport Header from \"../Header\";\r\nimport useInputHandling from \"../../custom_hooks/useInputHandling\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport auth from \"../../utils/Auth\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function Login() {\r\n  const [ isLoading, setIsLoading ] = useState(false);\r\n  const [ isLoggedIn, setIsLoggedIn ] = useState(false);\r\n  const hookConfig = {\r\n    defaultInputs: { email: { value: '' }, password: { value: '' } },\r\n    defaultInputIsValidState: false\r\n  }\r\n  const [ inputs, isValid, handleInputsUpdate, handleChange ] = useInputHandling(hookConfig);\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    \r\n    setIsLoading(true);\r\n    auth.login(inputs.email.value, inputs.password.value)\r\n      .then((data) => {\r\n        setIsLoggedIn(true);\r\n        localStorage.setItem('token', data.token)\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      })\r\n      .finally(() => {\r\n        setIsLoading(false);\r\n      });\r\n  }\r\n  return(\r\n    <>\r\n      { isLoggedIn && <Redirect to='/' />}\r\n      <Header \r\n        redirectLink={\r\n          <Link className=\"header__link header__link_type_auth\" to=\"sign-up\">Регистрация</Link>\r\n        }\r\n      />\r\n      <Form\r\n        type='auth'\r\n        onSubmit={handleSubmit}\r\n        isLoading={isLoading}\r\n        isValid={isValid}\r\n        inputs={inputs}\r\n        name=\"login\" \r\n        title=\"Вход\" \r\n        submitText=\"Войти\"\r\n        loadingSubmitText=\"Вход\"\r\n        inputFieldset={\r\n          <fieldset className=\"form__input-container form__input-container_type_auth\">\r\n            <div className=\"form__field\">\r\n              <input\r\n                className={`form__input form__input_type_auth ${!(inputs.email?.isValid ?? true) ? 'form__input_invalid' : ''}`} \r\n                name=\"email\" \r\n                id=\"email-input\" \r\n                type=\"email\" \r\n                placeholder=\"Email\" \r\n                required \r\n                onChange={handleChange} \r\n                value={inputs.email?.value} \r\n              />\r\n              <span className=\"form__input-error\"> { inputs.email?.errorMessage } </span>\r\n            </div>\r\n            <div className=\"form__field\">\r\n              <input \r\n                className={`form__input form__input_type_auth ${!(inputs.password?.isValid ?? true) ? 'form__input_invalid' : ''}`} \r\n                name=\"password\" \r\n                id=\"password-input\" \r\n                type=\"password\" \r\n                placeholder=\"Пароль\" \r\n                required\r\n                minLength=\"2\" \r\n                maxLength=\"30\" \r\n                onChange={handleChange} \r\n                value={inputs.password?.value} \r\n              />\r\n              <span className=\"form__input-error\"> { inputs.password?.errorMessage } </span>\r\n            </div>\r\n          </fieldset>\r\n        } \r\n      />\r\n    </>\r\n  )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}