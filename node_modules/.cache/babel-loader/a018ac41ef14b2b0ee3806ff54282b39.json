{"ast":null,"code":"import _objectSpread from\"/Users/maksim/Desktop/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"/Users/maksim/Desktop/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/maksim/Desktop/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{authConfig}from\"./constants\";var Auth=/*#__PURE__*/function(){function Auth(_ref){var baseUrl=_ref.baseUrl,headers=_ref.headers;_classCallCheck(this,Auth);this._baseUrl=baseUrl;this._headers=headers;}_createClass(Auth,[{key:\"_checkResponse\",value:function _checkResponse(res){return res.ok?Promise.resolve(res.json()):Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \".concat(res.status));}},{key:\"register\",value:function register(email,password){return fetch(\"\".concat(this._baseUrl,\"/signup\"),{method:'POST',headers:this._headers,body:JSON.stringify({email:email,password:password})}).then(this._checkResponse);}},{key:\"login\",value:function login(email,password){return fetch(\"\".concat(this._baseUrl,\"/signin\"),{method:'POST',headers:this._headers,body:JSON.stringify({email:email,password:password})}).then(this._checkResponse);}},{key:\"checkToken\",value:function checkToken(token){return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{method:'GET',headers:_objectSpread(_objectSpread({},this._headers),{},{\"Authorization\":\"Bearer \".concat(token)})}).then(this._checkResponse);}}]);return Auth;}();export default new Auth(authConfig);","map":{"version":3,"names":["authConfig","Auth","baseUrl","headers","_baseUrl","_headers","res","ok","Promise","resolve","json","reject","status","email","password","fetch","method","body","JSON","stringify","then","_checkResponse","token"],"sources":["/Users/maksim/Desktop/dev/mesto-react/src/utils/Auth.js"],"sourcesContent":["import { authConfig } from \"./constants\";\r\n\r\nclass Auth {\r\n  constructor({ baseUrl, headers }) {\r\n    this._baseUrl = baseUrl;\r\n    this._headers = headers;\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    return (res.ok) ? Promise.resolve(res.json()) : Promise.reject(`Ошибка ${res.status}`)\r\n  }\r\n\r\n  register(email, password) {\r\n    return fetch(`${this._baseUrl}/signup`, {\r\n        method: 'POST',\r\n        headers: this._headers,\r\n        body: JSON.stringify({ email, password })\r\n    })\r\n      .then(this._checkResponse);\r\n  }\r\n\r\n  login(email, password) {\r\n    return fetch(`${this._baseUrl}/signin`, {\r\n        method: 'POST',\r\n        headers: this._headers,\r\n        body: JSON.stringify({ email, password })\r\n    })\r\n      .then(this._checkResponse);\r\n  }\r\n\r\n  checkToken(token) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n        method: 'GET',\r\n        headers: {\r\n          ...this._headers,\r\n          \"Authorization\" : `Bearer ${token}`\r\n        }\r\n    })\r\n      .then(this._checkResponse);\r\n  }\r\n}\r\n\r\nexport default new Auth(authConfig);"],"mappings":"8WAAA,OAASA,UAAT,KAA2B,aAA3B,C,GAEMC,K,yBACJ,mBAAkC,IAApBC,QAAoB,MAApBA,OAAoB,CAAXC,OAAW,MAAXA,OAAW,4BAChC,KAAKC,QAAL,CAAgBF,OAAhB,CACA,KAAKG,QAAL,CAAgBF,OAAhB,CACD,C,+CAED,wBAAeG,GAAf,CAAoB,CAClB,MAAQA,IAAG,CAACC,EAAL,CAAWC,OAAO,CAACC,OAAR,CAAgBH,GAAG,CAACI,IAAJ,EAAhB,CAAX,CAAyCF,OAAO,CAACG,MAAR,gDAAyBL,GAAG,CAACM,MAA7B,EAAhD,CACD,C,wBAED,kBAASC,KAAT,CAAgBC,QAAhB,CAA0B,CACxB,MAAOC,MAAK,WAAI,KAAKX,QAAT,YAA4B,CACpCY,MAAM,CAAE,MAD4B,CAEpCb,OAAO,CAAE,KAAKE,QAFsB,CAGpCY,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEN,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAAf,CAH8B,CAA5B,CAAL,CAKJM,IALI,CAKC,KAAKC,cALN,CAAP,CAMD,C,qBAED,eAAMR,KAAN,CAAaC,QAAb,CAAuB,CACrB,MAAOC,MAAK,WAAI,KAAKX,QAAT,YAA4B,CACpCY,MAAM,CAAE,MAD4B,CAEpCb,OAAO,CAAE,KAAKE,QAFsB,CAGpCY,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEN,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAAf,CAH8B,CAA5B,CAAL,CAKJM,IALI,CAKC,KAAKC,cALN,CAAP,CAMD,C,0BAED,oBAAWC,KAAX,CAAkB,CAChB,MAAOP,MAAK,WAAI,KAAKX,QAAT,cAA8B,CACtCY,MAAM,CAAE,KAD8B,CAEtCb,OAAO,gCACF,KAAKE,QADH,MAEL,iCAA4BiB,KAA5B,CAFK,EAF+B,CAA9B,CAAL,CAOJF,IAPI,CAOC,KAAKC,cAPN,CAAP,CAQD,C,oBAGH,cAAe,IAAIpB,KAAJ,CAASD,UAAT,CAAf"},"metadata":{},"sourceType":"module"}