{"ast":null,"code":"var _jsxFileName = \"/Users/maksim/Desktop/dev/mesto-react/src/components/AuthForms/Register.js\",\n    _s = $RefreshSig$();\n\nimport Form from \"../Form\";\nimport Header from \"../Header\";\nimport useInputHandling from \"../../custom_hooks/useInputHandling\";\nimport { useState } from \"react\";\nimport InfoToolTipPopup from \"../Popups/InfoToolTipPopup\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport auth from \"../../utils/Auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Register() {\n  _s();\n\n  var _inputs$email$isValid, _inputs$email, _inputs$email2, _inputs$email3, _inputs$password$isVa, _inputs$password, _inputs$password2, _inputs$password3;\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [isPopupOpen, setPopupState] = useState(false);\n  const [isRequestSucceeded, setRequestState] = useState(true);\n  const hookConfig = {\n    defaultInputs: {\n      email: {\n        value: ''\n      },\n      password: {\n        value: ''\n      }\n    },\n    defaultInputIsValidState: false\n  };\n  const [inputs, isValid, handleInputsUpdate, handleChange] = useInputHandling(hookConfig);\n\n  function closePopup() {\n    setPopupState(false);\n  }\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    setIsLoading(true);\n    auth.register(inputs.email.value, inputs.password.value).then(() => setRequestState(true)).catch(err => {\n      console.log(err);\n      setRequestState(false);\n    }).finally(() => {\n      setIsLoading(false);\n      setPopupState(true);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [isRequestSucceeded && !isPopupOpen && /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/sign-in\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 49\n    }, this), /*#__PURE__*/_jsxDEV(Header, {\n      redirectLink: /*#__PURE__*/_jsxDEV(Link, {\n        className: \"header__link header__link_type_auth\",\n        to: \"sign-in\",\n        children: \"\\u0412\\u043E\\u0439\\u0442\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      type: \"auth\",\n      onSubmit: handleSubmit,\n      isLoading: isLoading,\n      isValid: isValid,\n      inputs: inputs,\n      name: \"register\",\n      title: \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\",\n      submitText: \"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\",\n      loadingSubmitText: \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\",\n      submitSubline: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form__submit-subline\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"form__submit-subline-text\",\n          children: \"\\u0423\\u0436\\u0435 \\u0437\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u044B?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          className: \"form__submit-subline-link\",\n          to: \"sign-in\",\n          children: \"\\u0412\\u043E\\u0439\\u0442\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this),\n      inputFieldset: /*#__PURE__*/_jsxDEV(\"fieldset\", {\n        className: \"form__input-container form__input-container_type_auth\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form__field\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: `form__input form__input_type_auth ${!((_inputs$email$isValid = (_inputs$email = inputs.email) === null || _inputs$email === void 0 ? void 0 : _inputs$email.isValid) !== null && _inputs$email$isValid !== void 0 ? _inputs$email$isValid : true) ? 'form__input_invalid' : ''}`,\n            name: \"email\",\n            id: \"email-input\",\n            type: \"email\",\n            placeholder: \"Email\",\n            required: true,\n            onChange: handleChange,\n            value: (_inputs$email2 = inputs.email) === null || _inputs$email2 === void 0 ? void 0 : _inputs$email2.value\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"form__input-error\",\n            children: [\" \", (_inputs$email3 = inputs.email) === null || _inputs$email3 === void 0 ? void 0 : _inputs$email3.errorMessage, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form__field\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: `form__input form__input_type_auth ${!((_inputs$password$isVa = (_inputs$password = inputs.password) === null || _inputs$password === void 0 ? void 0 : _inputs$password.isValid) !== null && _inputs$password$isVa !== void 0 ? _inputs$password$isVa : true) ? 'form__input_invalid' : ''}`,\n            name: \"password\",\n            id: \"password-input\",\n            type: \"password\",\n            placeholder: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n            required: true,\n            minLength: \"2\",\n            maxLength: \"30\",\n            onChange: handleChange,\n            value: (_inputs$password2 = inputs.password) === null || _inputs$password2 === void 0 ? void 0 : _inputs$password2.value\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"form__input-error\",\n            children: [\" \", (_inputs$password3 = inputs.password) === null || _inputs$password3 === void 0 ? void 0 : _inputs$password3.errorMessage, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(InfoToolTipPopup, {\n      isOpen: isPopupOpen,\n      onClose: closePopup,\n      isSucceeded: isRequestSucceeded\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Register, \"+24GOIkfjsFbHww8LIqGkqucs7s=\", false, function () {\n  return [useInputHandling];\n});\n\n_c = Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["Form","Header","useInputHandling","useState","InfoToolTipPopup","Link","Redirect","auth","Register","isLoading","setIsLoading","isPopupOpen","setPopupState","isRequestSucceeded","setRequestState","hookConfig","defaultInputs","email","value","password","defaultInputIsValidState","inputs","isValid","handleInputsUpdate","handleChange","closePopup","handleSubmit","evt","preventDefault","register","then","catch","err","console","log","finally","errorMessage"],"sources":["/Users/maksim/Desktop/dev/mesto-react/src/components/AuthForms/Register.js"],"sourcesContent":["import Form from \"../Form\";\r\nimport Header from \"../Header\";\r\nimport useInputHandling from \"../../custom_hooks/useInputHandling\";\r\nimport { useState } from \"react\";\r\nimport InfoToolTipPopup from \"../Popups/InfoToolTipPopup\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport auth from \"../../utils/Auth\";\r\n\r\nexport default function Register() {\r\n  const [ isLoading, setIsLoading ] = useState(false);\r\n  const [ isPopupOpen, setPopupState ] = useState(false);\r\n  const [ isRequestSucceeded, setRequestState ] = useState(true);\r\n  const hookConfig = {\r\n    defaultInputs: { email: { value: '' }, password: { value: '' } },\r\n    defaultInputIsValidState: false\r\n  }\r\n  const [ inputs, isValid, handleInputsUpdate, handleChange ] = useInputHandling(hookConfig);\r\n\r\n  function closePopup() {\r\n    setPopupState(false);\r\n  }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    \r\n    setIsLoading(true);\r\n    auth.register(inputs.email.value, inputs.password.value)\r\n      .then(() => setRequestState(true))\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setRequestState(false);\r\n      })\r\n      .finally(() => {\r\n        setIsLoading(false);\r\n        setPopupState(true);\r\n      });\r\n  }\r\n\r\n  return(\r\n    <>\r\n      { (isRequestSucceeded && !isPopupOpen) && <Redirect to='/sign-in' />}\r\n      <Header \r\n        redirectLink={\r\n          <Link className=\"header__link header__link_type_auth\" to=\"sign-in\">Войти</Link>\r\n        }\r\n      />\r\n      <Form\r\n        type='auth'\r\n        onSubmit={handleSubmit}\r\n        isLoading={isLoading}\r\n        isValid={isValid}\r\n        inputs={inputs}\r\n        name=\"register\" \r\n        title=\"Регистрация\" \r\n        submitText=\"Зарегистрироваться\"\r\n        loadingSubmitText=\"Регистрация\"\r\n        submitSubline={\r\n          <div className='form__submit-subline'>\r\n            <p className=\"form__submit-subline-text\">Уже зарегистрированы?</p>\r\n            <Link className=\"form__submit-subline-link\" to='sign-in' >Войти</Link>\r\n          </div>\r\n        }\r\n        inputFieldset={\r\n          <fieldset className=\"form__input-container form__input-container_type_auth\">\r\n            <div className=\"form__field\">\r\n              <input\r\n                className={`form__input form__input_type_auth ${!(inputs.email?.isValid ?? true) ? 'form__input_invalid' : ''}`} \r\n                name=\"email\" \r\n                id=\"email-input\" \r\n                type=\"email\" \r\n                placeholder=\"Email\" \r\n                required \r\n                onChange={handleChange} \r\n                value={inputs.email?.value} \r\n              />\r\n              <span className=\"form__input-error\"> { inputs.email?.errorMessage } </span>\r\n            </div>\r\n            <div className=\"form__field\">\r\n              <input \r\n                className={`form__input form__input_type_auth ${!(inputs.password?.isValid ?? true) ? 'form__input_invalid' : ''}`} \r\n                name=\"password\" \r\n                id=\"password-input\" \r\n                type=\"password\" \r\n                placeholder=\"Пароль\" \r\n                required\r\n                minLength=\"2\" \r\n                maxLength=\"30\" \r\n                onChange={handleChange} \r\n                value={inputs.password?.value} \r\n              />\r\n              <span className=\"form__input-error\"> { inputs.password?.errorMessage } </span>\r\n            </div>\r\n          </fieldset>\r\n        } \r\n      />\r\n      <InfoToolTipPopup \r\n        isOpen={isPopupOpen}\r\n        onClose={closePopup}\r\n        isSucceeded={isRequestSucceeded}\r\n      />\r\n    </>\r\n  )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}