{"ast":null,"code":"import _defineProperty from\"/Users/maksim/Desktop/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/maksim/Desktop/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/maksim/Desktop/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useRef,useState}from\"react\";export default function useInputHandling(_ref){var defaultInputs=_ref.defaultInputs,defaultInputIsValidState=_ref.defaultInputIsValidState;var isOpen=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var _useState=useState(defaultInputs),_useState2=_slicedToArray(_useState,2),inputs=_useState2[0],setInputs=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isValid=_useState4[0],setIsValid=_useState4[1];useEffect(function(){if(isOpen){var someInputIsInvalid=Object.values(inputs).some(function(input){var _input$isValid;return!((_input$isValid=input===null||input===void 0?void 0:input.isValid)!==null&&_input$isValid!==void 0?_input$isValid:defaultInputIsValidState);});!someInputIsInvalid?setIsValid(true):setIsValid(false);}},[inputs]);function handleInputsUpdate(){setInputs(defaultInputs);setIsValid(false);}function handleChange(evt){var input=evt.target;var value=input.value;var isValid=input.validity.valid;var errorMessage=input.validationMessage;setInputs(_objectSpread(_objectSpread({},inputs),{},_defineProperty({},input.name,{value:value,isValid:isValid,errorMessage:errorMessage})));}return[inputs,isValid,handleInputsUpdate,handleChange];}","map":{"version":3,"names":["useEffect","useRef","useState","useInputHandling","defaultInputs","defaultInputIsValidState","isOpen","inputs","setInputs","isValid","setIsValid","someInputIsInvalid","Object","values","some","input","handleInputsUpdate","handleChange","evt","target","value","validity","valid","errorMessage","validationMessage","name"],"sources":["/Users/maksim/Desktop/dev/mesto-react/src/custom_hooks/useInputHandling.js"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\r\n\r\nexport default function useInputHandling({ defaultInputs, defaultInputIsValidState }, isOpen = true) {\r\n  const [ inputs, setInputs ] = useState(defaultInputs);\r\n  const [ isValid, setIsValid ] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      const someInputIsInvalid = Object.values(inputs).some(input => !(input?.isValid ?? defaultInputIsValidState));\r\n\r\n      !someInputIsInvalid ? setIsValid(true) : setIsValid(false);\r\n    }\r\n  }, [inputs]);\r\n\r\n  function handleInputsUpdate() {\r\n    setInputs(defaultInputs);\r\n    \r\n    setIsValid(false);\r\n  }\r\n\r\n  function handleChange(evt) {\r\n    const input = evt.target;\r\n    const value = input.value;\r\n    const isValid = input.validity.valid;\r\n    const errorMessage = input.validationMessage;\r\n\r\n    setInputs({ ...inputs, [input.name]: { value, isValid, errorMessage } });\r\n  }\r\n\r\n  return [ inputs, isValid, handleInputsUpdate, handleChange ];\r\n}"],"mappings":"kXAAA,OAASA,SAAT,CAAoBC,MAApB,CAA4BC,QAA5B,KAA4C,OAA5C,CAEA,cAAe,SAASC,iBAAT,MAAsF,IAA1DC,cAA0D,MAA1DA,aAA0D,CAA3CC,wBAA2C,MAA3CA,wBAA2C,IAAfC,OAAe,2DAAN,IAAM,CACnG,cAA8BJ,QAAQ,CAACE,aAAD,CAAtC,wCAAQG,MAAR,eAAgBC,SAAhB,eACA,eAAgCN,QAAQ,CAAC,KAAD,CAAxC,yCAAQO,OAAR,eAAiBC,UAAjB,eAEAV,SAAS,CAAC,UAAM,CACd,GAAIM,MAAJ,CAAY,CACV,GAAMK,mBAAkB,CAAGC,MAAM,CAACC,MAAP,CAAcN,MAAd,EAAsBO,IAAtB,CAA2B,SAAAC,KAAK,2BAAI,kBAAEA,KAAF,SAAEA,KAAF,iBAAEA,KAAK,CAAEN,OAAT,iDAAoBJ,wBAApB,CAAJ,EAAhC,CAA3B,CAEA,CAACM,kBAAD,CAAsBD,UAAU,CAAC,IAAD,CAAhC,CAAyCA,UAAU,CAAC,KAAD,CAAnD,CACD,CACF,CANQ,CAMN,CAACH,MAAD,CANM,CAAT,CAQA,QAASS,mBAAT,EAA8B,CAC5BR,SAAS,CAACJ,aAAD,CAAT,CAEAM,UAAU,CAAC,KAAD,CAAV,CACD,CAED,QAASO,aAAT,CAAsBC,GAAtB,CAA2B,CACzB,GAAMH,MAAK,CAAGG,GAAG,CAACC,MAAlB,CACA,GAAMC,MAAK,CAAGL,KAAK,CAACK,KAApB,CACA,GAAMX,QAAO,CAAGM,KAAK,CAACM,QAAN,CAAeC,KAA/B,CACA,GAAMC,aAAY,CAAGR,KAAK,CAACS,iBAA3B,CAEAhB,SAAS,gCAAMD,MAAN,wBAAeQ,KAAK,CAACU,IAArB,CAA4B,CAAEL,KAAK,CAALA,KAAF,CAASX,OAAO,CAAPA,OAAT,CAAkBc,YAAY,CAAZA,YAAlB,CAA5B,GAAT,CACD,CAED,MAAO,CAAEhB,MAAF,CAAUE,OAAV,CAAmBO,kBAAnB,CAAuCC,YAAvC,CAAP,CACD"},"metadata":{},"sourceType":"module"}