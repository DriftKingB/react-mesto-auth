{"ast":null,"code":"import _slicedToArray from\"/Users/maksim/Desktop/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useRef,useState}from\"react\";import PopupWithForm from\"./PopupWithForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function EditAvatarPopup(_ref){var _linkInput$current;var isOpen=_ref.isOpen,isLoading=_ref.isLoading,onClose=_ref.onClose,onSubmit=_ref.onSubmit;var linkInput=useRef();var linkInputError=useRef();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isValid=_useState2[0],setIsValid=_useState2[1];useEffect(function(){!isOpen&&setTimeout(function(){return handleInputsUpdate();},200);},[isOpen]);function clearFieldset(){var input=linkInput.current;linkInputError.textContent='';input.value=null;input.classList.remove('form__input_invalid');}function handleInputsUpdate(){setIsValid(false);clearFieldset();}function handleChange(){var input=linkInput.current;linkInputError.current.textContent=input.validationMessage;if(!input.validity.valid){input.classList.add('form__input_invalid');setIsValid(false);}else{input.classList.remove('form__input_invalid');setIsValid(true);}}return/*#__PURE__*/_jsx(PopupWithForm,{onClose:onClose,onSubmit:onSubmit,isOpen:isOpen,isLoading:isLoading,isValid:isValid,inputs:{link:(_linkInput$current=linkInput.current)===null||_linkInput$current===void 0?void 0:_linkInput$current.value},name:\"avatar-edit\",title:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\",submitText:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\",loadingSubmitText:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0435\\u043D\\u0438\\u0435\",inputFieldset:/*#__PURE__*/_jsx(\"fieldset\",{className:\"form__input-container form__input-container_type_popup\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form__field\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form__input form__input_type_popup\",ref:linkInput,name:\"avatar\",id:\"avatar-link-input\",type:\"url\",placeholder:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043A\\u0430\\u0440\\u0442\\u0438\\u043D\\u043A\\u0443\",required:true,onChange:handleChange}),/*#__PURE__*/_jsx(\"span\",{ref:linkInputError,className:\"form__input-error\"})]})})});}","map":{"version":3,"names":["React","useEffect","useRef","useState","PopupWithForm","EditAvatarPopup","isOpen","isLoading","onClose","onSubmit","linkInput","linkInputError","isValid","setIsValid","setTimeout","handleInputsUpdate","clearFieldset","input","current","textContent","value","classList","remove","handleChange","validationMessage","validity","valid","add","link"],"sources":["/Users/maksim/Desktop/dev/mesto-react/src/components/Popups/EditAvatarPopup.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nexport default function EditAvatarPopup({ isOpen, isLoading, onClose, onSubmit }) {\n  const linkInput = useRef();\n  const linkInputError = useRef();\n  const [ isValid, setIsValid ] = useState(false);\n\n  useEffect(() => {\n    !isOpen && setTimeout(() => handleInputsUpdate(), 200);\n  }, [isOpen]);\n\n  function clearFieldset() {\n    const input = linkInput.current;\n\n    linkInputError.textContent = '';\n    input.value = null;\n    input.classList.remove('form__input_invalid');\n  }\n\n  function handleInputsUpdate() {\n    setIsValid(false);\n    clearFieldset();\n  }\n\n  function handleChange() {\n    const input = linkInput.current;\n\n    linkInputError.current.textContent = input.validationMessage;\n    if (!input.validity.valid) {\n      input.classList.add('form__input_invalid');\n      setIsValid(false);\n    } else {\n      input.classList.remove('form__input_invalid');\n      setIsValid(true);\n    }\n  }\n\n  return(\n    <PopupWithForm \n      onClose={onClose}\n      onSubmit={onSubmit}\n      isOpen={isOpen}\n      isLoading={isLoading}\n      isValid={isValid}\n      inputs={{link: linkInput.current?.value}}\n      name=\"avatar-edit\" \n      title=\"Обновить аватар\" \n      submitText=\"Сохранить\"\n      loadingSubmitText=\"Сохранение\"\n      inputFieldset={\n        <fieldset className=\"form__input-container form__input-container_type_popup\">\n          <div className=\"form__field\">\n            <input\n              className=\"form__input form__input_type_popup\"\n              ref={linkInput} \n              name=\"avatar\" \n              id=\"avatar-link-input\" \n              type=\"url\" \n              placeholder=\"Ссылка на картинку\" \n              required \n              onChange={handleChange} \n            />\n            <span ref={linkInputError} className=\"form__input-error\"></span>\n          </div>\n        </fieldset>\n      } \n    />\n  )\n}\n\n"],"mappings":"2HAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,MAA3B,CAAmCC,QAAnC,KAAmD,OAAnD,CACA,MAAOC,cAAP,KAA0B,iBAA1B,C,wFAEA,cAAe,SAASC,gBAAT,MAAmE,2BAAxCC,OAAwC,MAAxCA,MAAwC,CAAhCC,SAAgC,MAAhCA,SAAgC,CAArBC,OAAqB,MAArBA,OAAqB,CAAZC,QAAY,MAAZA,QAAY,CAChF,GAAMC,UAAS,CAAGR,MAAM,EAAxB,CACA,GAAMS,eAAc,CAAGT,MAAM,EAA7B,CACA,cAAgCC,QAAQ,CAAC,KAAD,CAAxC,wCAAQS,OAAR,eAAiBC,UAAjB,eAEAZ,SAAS,CAAC,UAAM,CACd,CAACK,MAAD,EAAWQ,UAAU,CAAC,iBAAMC,mBAAkB,EAAxB,EAAD,CAA6B,GAA7B,CAArB,CACD,CAFQ,CAEN,CAACT,MAAD,CAFM,CAAT,CAIA,QAASU,cAAT,EAAyB,CACvB,GAAMC,MAAK,CAAGP,SAAS,CAACQ,OAAxB,CAEAP,cAAc,CAACQ,WAAf,CAA6B,EAA7B,CACAF,KAAK,CAACG,KAAN,CAAc,IAAd,CACAH,KAAK,CAACI,SAAN,CAAgBC,MAAhB,CAAuB,qBAAvB,EACD,CAED,QAASP,mBAAT,EAA8B,CAC5BF,UAAU,CAAC,KAAD,CAAV,CACAG,aAAa,GACd,CAED,QAASO,aAAT,EAAwB,CACtB,GAAMN,MAAK,CAAGP,SAAS,CAACQ,OAAxB,CAEAP,cAAc,CAACO,OAAf,CAAuBC,WAAvB,CAAqCF,KAAK,CAACO,iBAA3C,CACA,GAAI,CAACP,KAAK,CAACQ,QAAN,CAAeC,KAApB,CAA2B,CACzBT,KAAK,CAACI,SAAN,CAAgBM,GAAhB,CAAoB,qBAApB,EACAd,UAAU,CAAC,KAAD,CAAV,CACD,CAHD,IAGO,CACLI,KAAK,CAACI,SAAN,CAAgBC,MAAhB,CAAuB,qBAAvB,EACAT,UAAU,CAAC,IAAD,CAAV,CACD,CACF,CAED,mBACE,KAAC,aAAD,EACE,OAAO,CAAEL,OADX,CAEE,QAAQ,CAAEC,QAFZ,CAGE,MAAM,CAAEH,MAHV,CAIE,SAAS,CAAEC,SAJb,CAKE,OAAO,CAAEK,OALX,CAME,MAAM,CAAE,CAACgB,IAAI,qBAAElB,SAAS,CAACQ,OAAZ,6CAAE,mBAAmBE,KAA1B,CANV,CAOE,IAAI,CAAC,aAPP,CAQE,KAAK,CAAC,uFARR,CASE,UAAU,CAAC,wDATb,CAUE,iBAAiB,CAAC,8DAVpB,CAWE,aAAa,cACX,iBAAU,SAAS,CAAC,wDAApB,uBACE,aAAK,SAAS,CAAC,aAAf,wBACE,cACE,SAAS,CAAC,oCADZ,CAEE,GAAG,CAAEV,SAFP,CAGE,IAAI,CAAC,QAHP,CAIE,EAAE,CAAC,mBAJL,CAKE,IAAI,CAAC,KALP,CAME,WAAW,CAAC,oGANd,CAOE,QAAQ,KAPV,CAQE,QAAQ,CAAEa,YARZ,EADF,cAWE,aAAM,GAAG,CAAEZ,cAAX,CAA2B,SAAS,CAAC,mBAArC,EAXF,GADF,EAZJ,EADF,CA+BD"},"metadata":{},"sourceType":"module"}