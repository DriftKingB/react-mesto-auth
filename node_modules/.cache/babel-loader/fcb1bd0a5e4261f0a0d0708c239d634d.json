{"ast":null,"code":"var _jsxFileName = \"/Users/maksim/Desktop/dev/mesto-react/src/components/Popups/EditAvatarPopup.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function EditAvatarPopup(_ref) {\n  _s();\n\n  var _linkInput$current;\n\n  let {\n    isOpen,\n    isLoading,\n    onClose,\n    onSubmit\n  } = _ref;\n  const linkInput = useRef();\n  const linkInputError = useRef();\n  const [isValid, setIsValid] = useState(false);\n  useEffect(() => {\n    !isOpen && setTimeout(() => handleInputsUpdate(), 200);\n  }, [isOpen]);\n\n  function clearFieldset() {\n    const input = linkInput.current;\n    linkInputError.textContent = '';\n    input.value = null;\n    input.classList.remove('form__input_invalid');\n  }\n\n  function handleInputsUpdate() {\n    setIsValid(false);\n    clearFieldset();\n  }\n\n  function handleChange() {\n    const input = linkInput.current;\n    linkInputError.current.textContent = input.validationMessage;\n\n    if (!input.validity.valid) {\n      input.classList.add('form__input_invalid');\n      setIsValid(false);\n    } else {\n      input.classList.remove('form__input_invalid');\n      setIsValid(true);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(PopupWithForm, {\n    onClose: onClose,\n    onSubmit: onSubmit,\n    isOpen: isOpen,\n    isLoading: isLoading,\n    isValid: isValid,\n    inputs: {\n      link: (_linkInput$current = linkInput.current) === null || _linkInput$current === void 0 ? void 0 : _linkInput$current.value\n    },\n    name: \"avatar-edit\",\n    title: \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\",\n    submitText: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\",\n    loadingSubmitText: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0435\\u043D\\u0438\\u0435\",\n    inputFieldset: /*#__PURE__*/_jsxDEV(\"fieldset\", {\n      className: \"form__input-container form__input-container_type_popup\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form__field\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"form__input form__input_type_popup\",\n          ref: linkInput,\n          name: \"avatar\",\n          id: \"avatar-link-input\",\n          type: \"url\",\n          placeholder: \"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043A\\u0430\\u0440\\u0442\\u0438\\u043D\\u043A\\u0443\",\n          required: true,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          ref: linkInputError,\n          className: \"form__input-error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n}\n\n_s(EditAvatarPopup, \"sAUSeN8/Fb4yX3mRF9T74pi6Nyg=\");\n\n_c = EditAvatarPopup;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditAvatarPopup\");","map":{"version":3,"names":["React","useEffect","useRef","useState","PopupWithForm","EditAvatarPopup","isOpen","isLoading","onClose","onSubmit","linkInput","linkInputError","isValid","setIsValid","setTimeout","handleInputsUpdate","clearFieldset","input","current","textContent","value","classList","remove","handleChange","validationMessage","validity","valid","add","link"],"sources":["/Users/maksim/Desktop/dev/mesto-react/src/components/Popups/EditAvatarPopup.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nexport default function EditAvatarPopup({ isOpen, isLoading, onClose, onSubmit }) {\n  const linkInput = useRef();\n  const linkInputError = useRef();\n  const [ isValid, setIsValid ] = useState(false);\n\n  useEffect(() => {\n    !isOpen && setTimeout(() => handleInputsUpdate(), 200);\n  }, [isOpen]);\n\n  function clearFieldset() {\n    const input = linkInput.current;\n\n    linkInputError.textContent = '';\n    input.value = null;\n    input.classList.remove('form__input_invalid');\n  }\n\n  function handleInputsUpdate() {\n    setIsValid(false);\n    clearFieldset();\n  }\n\n  function handleChange() {\n    const input = linkInput.current;\n\n    linkInputError.current.textContent = input.validationMessage;\n    if (!input.validity.valid) {\n      input.classList.add('form__input_invalid');\n      setIsValid(false);\n    } else {\n      input.classList.remove('form__input_invalid');\n      setIsValid(true);\n    }\n  }\n\n  return(\n    <PopupWithForm \n      onClose={onClose}\n      onSubmit={onSubmit}\n      isOpen={isOpen}\n      isLoading={isLoading}\n      isValid={isValid}\n      inputs={{link: linkInput.current?.value}}\n      name=\"avatar-edit\" \n      title=\"Обновить аватар\" \n      submitText=\"Сохранить\"\n      loadingSubmitText=\"Сохранение\"\n      inputFieldset={\n        <fieldset className=\"form__input-container form__input-container_type_popup\">\n          <div className=\"form__field\">\n            <input\n              className=\"form__input form__input_type_popup\"\n              ref={linkInput} \n              name=\"avatar\" \n              id=\"avatar-link-input\" \n              type=\"url\" \n              placeholder=\"Ссылка на картинку\" \n              required \n              onChange={handleChange} \n            />\n            <span ref={linkInputError} className=\"form__input-error\"></span>\n          </div>\n        </fieldset>\n      } \n    />\n  )\n}\n\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,MAA3B,EAAmCC,QAAnC,QAAmD,OAAnD;AACA,OAAOC,aAAP,MAA0B,iBAA1B;;AAEA,eAAe,SAASC,eAAT,OAAmE;EAAA;;EAAA;;EAAA,IAA1C;IAAEC,MAAF;IAAUC,SAAV;IAAqBC,OAArB;IAA8BC;EAA9B,CAA0C;EAChF,MAAMC,SAAS,GAAGR,MAAM,EAAxB;EACA,MAAMS,cAAc,GAAGT,MAAM,EAA7B;EACA,MAAM,CAAEU,OAAF,EAAWC,UAAX,IAA0BV,QAAQ,CAAC,KAAD,CAAxC;EAEAF,SAAS,CAAC,MAAM;IACd,CAACK,MAAD,IAAWQ,UAAU,CAAC,MAAMC,kBAAkB,EAAzB,EAA6B,GAA7B,CAArB;EACD,CAFQ,EAEN,CAACT,MAAD,CAFM,CAAT;;EAIA,SAASU,aAAT,GAAyB;IACvB,MAAMC,KAAK,GAAGP,SAAS,CAACQ,OAAxB;IAEAP,cAAc,CAACQ,WAAf,GAA6B,EAA7B;IACAF,KAAK,CAACG,KAAN,GAAc,IAAd;IACAH,KAAK,CAACI,SAAN,CAAgBC,MAAhB,CAAuB,qBAAvB;EACD;;EAED,SAASP,kBAAT,GAA8B;IAC5BF,UAAU,CAAC,KAAD,CAAV;IACAG,aAAa;EACd;;EAED,SAASO,YAAT,GAAwB;IACtB,MAAMN,KAAK,GAAGP,SAAS,CAACQ,OAAxB;IAEAP,cAAc,CAACO,OAAf,CAAuBC,WAAvB,GAAqCF,KAAK,CAACO,iBAA3C;;IACA,IAAI,CAACP,KAAK,CAACQ,QAAN,CAAeC,KAApB,EAA2B;MACzBT,KAAK,CAACI,SAAN,CAAgBM,GAAhB,CAAoB,qBAApB;MACAd,UAAU,CAAC,KAAD,CAAV;IACD,CAHD,MAGO;MACLI,KAAK,CAACI,SAAN,CAAgBC,MAAhB,CAAuB,qBAAvB;MACAT,UAAU,CAAC,IAAD,CAAV;IACD;EACF;;EAED,oBACE,QAAC,aAAD;IACE,OAAO,EAAEL,OADX;IAEE,QAAQ,EAAEC,QAFZ;IAGE,MAAM,EAAEH,MAHV;IAIE,SAAS,EAAEC,SAJb;IAKE,OAAO,EAAEK,OALX;IAME,MAAM,EAAE;MAACgB,IAAI,wBAAElB,SAAS,CAACQ,OAAZ,uDAAE,mBAAmBE;IAA1B,CANV;IAOE,IAAI,EAAC,aAPP;IAQE,KAAK,EAAC,uFARR;IASE,UAAU,EAAC,wDATb;IAUE,iBAAiB,EAAC,8DAVpB;IAWE,aAAa,eACX;MAAU,SAAS,EAAC,wDAApB;MAAA,uBACE;QAAK,SAAS,EAAC,aAAf;QAAA,wBACE;UACE,SAAS,EAAC,oCADZ;UAEE,GAAG,EAAEV,SAFP;UAGE,IAAI,EAAC,QAHP;UAIE,EAAE,EAAC,mBAJL;UAKE,IAAI,EAAC,KALP;UAME,WAAW,EAAC,oGANd;UAOE,QAAQ,MAPV;UAQE,QAAQ,EAAEa;QARZ;UAAA;UAAA;UAAA;QAAA,QADF,eAWE;UAAM,GAAG,EAAEZ,cAAX;UAA2B,SAAS,EAAC;QAArC;UAAA;UAAA;UAAA;QAAA,QAXF;MAAA;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA;EAZJ;IAAA;IAAA;IAAA;EAAA,QADF;AA+BD;;GAlEuBN,e;;KAAAA,e"},"metadata":{},"sourceType":"module"}